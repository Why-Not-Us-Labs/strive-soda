{%- comment -%}
Why Strive Soda? - Electrolytes section
- Desktop: Text left, boxes right (side by side)
- Mobile: Everything fits in single viewport
{%- endcomment -%}

<section class="why-strive-section science-hero-section" id="science" data-section-id="{{ section.id }}">
  <div class="why-strive-container">
    
    <!-- Intro content -->
    <div class="why-strive-intro">
      {%- if section.settings.eyebrow != blank -%}
        <h2 class="why-strive-eyebrow">{{ section.settings.eyebrow }}</h2>
      {%- endif -%}
      
      {%- if section.settings.heading != blank -%}
        <h3 class="why-strive-heading">{{ section.settings.heading }}</h3>
      {%- endif -%}
      
      {%- if section.settings.description != blank -%}
        <p class="why-strive-desc">{{ section.settings.description }}</p>
      {%- endif -%}
      
      {%- if section.settings.cta_text != blank -%}
        <a href="{{ section.settings.cta_link }}" class="science-cta">
          {{ section.settings.cta_text }}
        </a>
      {%- endif -%}
    </div>
    
    <!-- Electrolytes grid -->
    <div class="electrolytes-grid">
      
      <!-- Sodium -->
      <a href="{{ section.settings.sodium_link }}" class="electrolyte-box sodium">
        <div class="electrolyte-content">
          <span class="electrolyte-badge">Essential Electrolyte</span>
          <h4 class="electrolyte-title">Sodium</h4>
          <p class="electrolyte-desc">{{ section.settings.sodium_text }}</p>
        </div>
        {%- if section.settings.sodium_image != blank -%}
          <img 
            src="{{ section.settings.sodium_image | image_url: width: 800 }}" 
            alt="Sodium" 
            class="electrolyte-image"
            loading="lazy"
          >
        {%- endif -%}
      </a>
      
      <!-- Potassium -->
      <a href="{{ section.settings.potassium_link }}" class="electrolyte-box potassium">
        <div class="electrolyte-content">
          <span class="electrolyte-badge">Muscle Power</span>
          <h4 class="electrolyte-title">Potassium</h4>
          <p class="electrolyte-desc">{{ section.settings.potassium_text }}</p>
        </div>
        {%- if section.settings.potassium_image != blank -%}
          <img 
            src="{{ section.settings.potassium_image | image_url: width: 800 }}" 
            alt="Potassium" 
            class="electrolyte-image"
            loading="lazy"
          >
        {%- endif -%}
      </a>
      
      <!-- Magnesium -->
      <a href="{{ section.settings.magnesium_link }}" class="electrolyte-box magnesium">
        <div class="electrolyte-content">
          <span class="electrolyte-badge">Energy Catalyst</span>
          <h4 class="electrolyte-title">Magnesium</h4>
          <p class="electrolyte-desc">{{ section.settings.magnesium_text }}</p>
        </div>
        {%- if section.settings.magnesium_image != blank -%}
          <img 
            src="{{ section.settings.magnesium_image | image_url: width: 800 }}" 
            alt="Magnesium" 
            class="electrolyte-image"
            loading="lazy"
          >
        {%- endif -%}
      </a>
      
    </div>
    
  </div>
</section>

<style>
  
  :root {
    --tiffany-blue: #0ABAB5;
    --strive-orange: #FF7A00;
    --gold-yellow: #FFD700;
  }
  
  /* Ensure main element doesn't add spacing */
  main#mainContent {
    padding-top: 0 !important;
    margin-top: 0 !important;
  }

  /* CRITICAL: Override global app.css rules that add padding-top to first sections */
  /* Global CSS targets sections without "hero" in ID - we need to override it */
  body.hpsticky main > .shopify-section:first-of-type:has(.why-strive-section),
  body.hpfixed main > .shopify-section:first-of-type:has(.why-strive-section),
  body.hpsticky main > .shopify-section:first-of-type:has(.science-hero-section),
  body.hpfixed main > .shopify-section:first-of-type:has(.science-hero-section),
  #shopify-section-group-header ~ .shopify-section:first-of-type:has(.why-strive-section),
  #shopify-section-group-header ~ .shopify-section:first-of-type:has(.science-hero-section),
  main > div:first-child > .shopify-section:first-of-type:has(.why-strive-section),
  main > div:first-child > .shopify-section:first-of-type:has(.science-hero-section) {
    padding-top: 0 !important;
    margin-top: 0 !important;
  }

  /* Section wrapper - starts at top of viewport, acts as positioning context */
  /* Target section wrapper using multiple selectors for reliability */
  #shopify-section-{{ section.id }},
  .shopify-section:has(.science-hero-section),
  main > .shopify-section:first-of-type:has(.why-strive-section) {
    padding: 0 !important;
    margin: 0 !important;
    margin-top: 0 !important;
    display: block;
    width: 100%;
    height: 100vh;
    min-height: 100vh;
    box-sizing: border-box;
    overflow: hidden;
    background: transparent;
    border: none;
    position: relative;
    top: 0;
    left: 0;
  }

  /* Section fills ENTIRE wrapper - 100% height, fills wrapper completely */
  .why-strive-section {
    scroll-margin-top: clamp(60px, 9vh, 120px);
    background: #F5F1E8;
    padding: 0 clamp(20px, 4vw, 60px);
    width: 100% !important;
    height: 100% !important;
    min-height: 100% !important;
    max-height: 100% !important;
    display: flex;
    align-items: center;
    box-sizing: border-box;
    margin: 0 !important;
    position: absolute;
    top: 0 !important;
    left: 0;
    right: 0;
    bottom: 0;
  }
  
  .why-strive-container {
    max-width: 1600px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: 380px 1fr;
    gap: clamp(40px, 5vw, 80px);
    align-items: center;
    width: 100%;
    height: 100%;
    padding-top: var(--headerGroupHeight, 0px);
    padding-bottom: 0;
    box-sizing: border-box;
  }
  
  .why-strive-intro {
    /* Text stays on left */
  }
  
  .why-strive-eyebrow {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    font-size: clamp(11px, 1vw, 13px);
    font-weight: 600;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    margin: 0 0 12px;
    color: #111;
  }
  
  .why-strive-heading {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    font-size: clamp(32px, 4vw, 52px);
    font-weight: 500 !important;
    line-height: 1.05;
    margin: 0 0 16px;
    color: #111;
  }
  
  .why-strive-desc {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    font-size: clamp(14px, 1.4vw, 18px);
    line-height: 1.45;
    color: #333;
    margin: 0 0 28px;
  }
  
  .science-cta {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 14px 28px;
    background: var(--strive-orange);
    color: #fff !important;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    font-size: 12px;
    font-weight: 800;
    letter-spacing: 1px;
    text-transform: uppercase;
    text-decoration: none;
    border: 2px solid var(--strive-orange);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .science-cta:hover {
    background: var(--tiffany-blue);
    color: #fff !important;
    border-color: var(--tiffany-blue);
    transform: translateY(-2px);
    box-shadow: 0 12px 32px rgba(10,186,181,.25);
  }
  
  .electrolytes-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: clamp(12px, 1.5vw, 20px);
  }
  
  .electrolyte-box {
    position: relative;
    overflow: hidden;
    aspect-ratio: 1 / 1;
    border: 3px solid #111;
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    text-decoration: none;
    display: block;
  }
  
  .electrolyte-box:hover {
    transform: translateY(-8px);
    box-shadow: 0 16px 40px rgba(0,0,0,.2);
  }
  
  .electrolyte-box.sodium {
    background: var(--gold-yellow);
  }
  
  .electrolyte-box.potassium {
    background: var(--tiffany-blue);
  }
  
  .electrolyte-box.magnesium {
    background: var(--strive-orange);
  }
  
  .electrolyte-content {
    position: relative;
    z-index: 2;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: clamp(16px, 3vw, 32px);
    text-align: center;
    transition: opacity 0.4s ease;
  }
  
  .electrolyte-box:hover .electrolyte-content {
    opacity: 0;
  }
  
  .electrolyte-badge {
    display: inline-block;
    padding: 6px 14px;
    background: #fff;
    border: 2px solid #111;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    font-size: clamp(8px, 0.85vw, 10px);
    font-weight: 800;
    letter-spacing: 1px;
    text-transform: uppercase;
    margin-bottom: clamp(12px, 2vw, 18px);
    color: #111;
  }
  
  .electrolyte-title {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    font-size: clamp(22px, 2.8vw, 36px);
    font-weight: 900;
    line-height: 1.1;
    margin: 0 0 clamp(8px, 1.2vw, 14px);
    color: #111;
  }
  
  .electrolyte-desc {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    font-size: clamp(11px, 1.2vw, 15px);
    line-height: 1.35;
    color: #111;
    margin: 0;
  }
  
  .electrolyte-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
    opacity: 0;
    transition: opacity 0.4s ease;
    object-fit: cover;
  }
  
  .electrolyte-box:hover .electrolyte-image {
    opacity: 1;
  }
  
  /* ===== TABLET: Fill viewport ===== */
  @media (min-width: 769px) and (max-width: 1279px) {
    /* Section wrapper - full viewport height on tablet */
    #shopify-section-{{ section.id }},
    .shopify-section:has(.science-hero-section),
    main > .shopify-section:first-of-type:has(.why-strive-section) {
      padding: 0 !important;
      margin: 0 !important;
      height: 100vh;
      min-height: 100vh;
      background: transparent;
    }

    /* Section fills ENTIRE wrapper on tablet - 100% height */
    .why-strive-section {
      width: 100% !important;
      height: 100% !important;
      min-height: 100% !important;
      max-height: 100% !important;
      top: 0 !important;
      bottom: 0;
    }
  }

  /* ===== MOBILE: Single viewport fit ===== */
  @media (max-width: 768px) {
    /* Section wrapper - full viewport height on mobile */
    #shopify-section-{{ section.id }},
    .shopify-section:has(.science-hero-section),
    main > .shopify-section:first-of-type:has(.why-strive-section) {
      padding: 0 !important;
      margin: 0 !important;
      height: 100dvh;
      min-height: 100dvh;
      background: transparent;
    }

    /* Section fills ENTIRE wrapper on mobile - 100% height */
    .why-strive-section {
      padding: 0 16px;
      width: 100% !important;
      height: 100% !important;
      min-height: 100% !important;
      max-height: 100% !important;
      top: 0 !important;
      bottom: 0;
      display: flex;
      align-items: center;
    }
    
    .why-strive-container {
      grid-template-columns: 1fr;
      gap: 20px;
      width: 100%;
      height: 100%;
      padding-top: 0;
      padding-bottom: 0;
    }
    
    .why-strive-intro {
      text-align: center;
    }
    
    .why-strive-eyebrow {
      font-size: 10px;
      margin-bottom: 8px;
      letter-spacing: 1.2px;
    }
    
    .why-strive-heading {
      font-size: clamp(24px, 6vw, 32px);
      margin-bottom: 8px;
      line-height: 1.1;
    }
    
    .why-strive-desc {
      font-size: clamp(12px, 3.5vw, 14px);
      line-height: 1.35;
      margin-bottom: 16px;
    }
    
    .science-cta {
      padding: 12px 24px;
      font-size: 11px;
    }
    
    .electrolytes-grid {
      grid-template-columns: 1fr;
      gap: 12px;
    }
    
    .electrolyte-box {
      aspect-ratio: 5 / 2;
      border: 2px solid #111;
    }
    
    .electrolyte-content {
      padding: 12px 16px;
    }
    
    .electrolyte-badge {
      padding: 4px 10px;
      font-size: 8px;
      margin-bottom: 8px;
      letter-spacing: 0.8px;
    }
    
    .electrolyte-title {
      font-size: 20px;
      margin-bottom: 6px;
    }
    
    .electrolyte-desc {
      font-size: 11px;
      line-height: 1.3;
    }
  }
</style>

{% schema %}
{
  "name": "Why Strive Soda",
  "disabled_on": { "groups": ["header", "footer", "aside"] },
  "settings": [
    {
      "type": "header",
      "content": "Section Content"
    },
    {
      "type": "text",
      "id": "eyebrow",
      "label": "Eyebrow text",
      "default": "WHY STRIVE SODA?"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Main heading",
      "default": "What is Hydration Soda?"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Better-for-you hydration that fuels your day with bold flavor and essential electrolytes."
    },
    {
      "type": "text",
      "id": "cta_text",
      "label": "CTA button text",
      "default": "THE SCIENCE BEHIND STRIVE"
    },
    {
      "type": "url",
      "id": "cta_link",
      "label": "CTA button link"
    },
    {
      "type": "header",
      "content": "Sodium Box"
    },
    {
      "type": "text",
      "id": "sodium_text",
      "label": "Sodium description",
      "default": "Replenishes what you sweat out to keep fluids balanced."
    },
    {
      "type": "url",
      "id": "sodium_link",
      "label": "Sodium link"
    },
    {
      "type": "image_picker",
      "id": "sodium_image",
      "label": "Sodium hover image"
    },
    {
      "type": "header",
      "content": "Potassium Box"
    },
    {
      "type": "text",
      "id": "potassium_text",
      "label": "Potassium description",
      "default": "Supports muscle and nerve function; balances sodium."
    },
    {
      "type": "url",
      "id": "potassium_link",
      "label": "Potassium link"
    },
    {
      "type": "image_picker",
      "id": "potassium_image",
      "label": "Potassium hover image"
    },
    {
      "type": "header",
      "content": "Magnesium Box"
    },
    {
      "type": "text",
      "id": "magnesium_text",
      "label": "Magnesium description",
      "default": "Aids energy and muscle function; helps prevent cramps."
    },
    {
      "type": "url",
      "id": "magnesium_link",
      "label": "Magnesium link"
    },
    {
      "type": "image_picker",
      "id": "magnesium_image",
      "label": "Magnesium hover image"
    }
  ],
  "presets": [
    {
      "name": "Why Strive Soda"
    }
  ]
}
{% endschema %}